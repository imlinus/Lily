const path = require('path')
const mime = require('./mimes.js')

module.exports = {
  path (opts, file) {
    const slash = file.split('')[file.split('').length - 1] === '/'

    switch (file) {
      case '/': return `${opts.src}/${opts.main}`
      default: return (slash ? `${opts.src}${file.slice(0, -1)}` : `${opts.src}${file}`)
    }
  },

  head (file) {
    const ext = String(path.extname(file)).toLowerCase().replace ('.', '')

    return {
      'Content-Type': mime.get(ext)
    }
  }
}
